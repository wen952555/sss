/* frontend/src/App.css */

/* --- 全局与基础布局 --- */
body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, ऑक्सीजन, Ubuntu, Cantarell, 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; background-color: #073b4c; color: #f1f1f1; margin: 0; padding: 0; box-sizing: border-box; }
*, *::before, *::after { box-sizing: inherit; }
.app-container { display: flex; flex-direction: column; align-items: center; width: 100%; min-height: 100vh; padding: 15px; }

/* --- 顶部玩家状态横幅 (紧凑显示) --- */
.top-banner-container {
  display: flex;
  justify-content: space-between; /* 或 space-around，根据间距喜好 */
  align-items: stretch; 
  width: 100%;
  max-width: 900px; /* 调整最大宽度以容纳4个玩家信息 */
  padding: 8px;
  margin-bottom: 20px;
  background-color: rgba(0, 0, 0, 0.3);
  border-radius: 10px;
  gap: 8px; /* 玩家信息块之间的间隙 */
}

/* 通用玩家显示块样式 (用于真人和AI) */
.player-banner-item { /* 应用于 HumanPlayerInfoBlock 和 AIPlayerDisplay 的外层div */
  flex: 1 1 23%; /* 尝试让每个块占据大约1/4宽度，并允许收缩和增长 */
  min-width: 120px; /* 非常小的最小宽度 */
  max-width: 200px; /* 限制最大宽度，避免过宽 */
  padding: 8px 10px; /* 减小内边距 */
  border-radius: 6px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  background-color: rgba(255, 255, 255, 0.05);
  transition: all 0.3s ease; /* 为状态变化添加过渡 */
}
.human-player-banner-item { border-color: #ffd166; }
.ai-player-display.arranged { border-color: #06d6a0; }
.ai-player-display.thinking { border-color: #ffd166; animation: pulse-border 1.5s infinite; }
@keyframes pulse-border { /* ... (保持不变) ... */ }

.player-avatar-banner { width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1em; margin-bottom: 5px; }
.human-player-avatar { background-color: #ffd166; color: #073b4c; border: 1px solid #fca311;}
.ai-player-avatar { background-color: #073b4c; color: #118ab2; border: 1px solid #118ab2;}

.player-name-banner { font-weight: 500; font-size: 0.9em; color: #e0e0e0; margin-bottom: 2px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 100%;}
.human-player-name { color: #fff; }

.player-status-banner { font-size: 0.7em; color: #9eadba; margin-bottom: 3px; min-height: 1em; font-style: italic; }
.ai-player-status { /* 同上 */ }

.player-score-container-banner { margin-top: auto; font-size: 0.8em; width: 100%;}
.player-total-score-banner, .player-round-score-banner { display: block; padding: 1px 0; margin: 0; white-space: nowrap; }
.player-total-score-banner { font-weight: bold; font-size:0.85em; }
.player-round-score-banner { font-size: 0.75em; opacity: 0.7; }
.human-player-total-score { color: #ffd166; }
.positive { color: #06d6a0; }
.negative { color: #ef476f; }


/* --- 游戏板与牌道区域 --- */
.game-board { display: flex; flex-direction: column; gap: 20px; padding: 20px; background-color: rgba(0, 0, 0, 0.35); border-radius: 16px; box-shadow: 0 6px 20px rgba(0,0,0,0.35); width: 100%; max-width: 720px; margin-top: 0; }
.hand-lanes-container { display: flex; flex-direction: column; gap: 18px; width: 100%; max-width: 680px; margin: 0 auto; }
.hand-area { background-color: rgba(0, 0, 0, 0.2); padding: 15px; border-radius: 10px; min-height: 150px; display: flex; flex-direction: row; /* 改回row */ gap: 10px; transition: background-color 0.25s ease-in-out, box-shadow 0.25s ease; position: relative; align-items: center; /* 卡牌垂直居中 */ }
.hand-info-internal { position: absolute; top: 8px; left: 12px; right: 12px; display: flex; justify-content: space-between; align-items: center; pointer-events: none; /* 避免遮挡拖拽 */ z-index: 1;} /* 让文字在卡牌上方 */
.hand-area-title-internal { color: #ffd166; font-weight: 600; font-size: 1em; margin: 0; }
.hand-type-display-internal { font-size: 0.9em; color: #f1f1f1; background-color: rgba(0,0,0,0.6); padding: 3px 8px; border-radius: 4px; font-weight: 500; }
.hand-area.allow-wrapping { flex-wrap: wrap; justify-content: center; min-height: 220px; padding-top: 40px; /* 为绝对定位的文字留空间 */ align-items: flex-start; }
.hand-area:not(.allow-wrapping) { flex-wrap: nowrap; justify-content: center; padding-top: 40px; /* 也为绝对定位文字留空间 */ }
.hand-area.droppable-active { background-color: rgba(66, 153, 225, 0.3); }

/* 卡牌样式 - 尺寸保持较大 */
.card { width: 80px; height: 112px; border-radius: 6px; /* ...其他不变... */ }
/* ... (CardComponent, Card 拖拽等样式保持不变) ... */


/* --- 控制按钮区域 --- */
.controls { display: flex; justify-content: center; gap: 18px; padding-top: 15px; width: 100%; flex-wrap: wrap; }
/* ... (GameButton 样式保持不变) ... */
.game-button.compare-all-button { /* ... */ margin-top: 10px; /* 确保与上方按钮有间隔 */ }


/* --- 比牌结果模态框样式 --- */
.modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0, 0, 0, 0.8); display: flex; align-items: center; justify-content: center; z-index: 1000; padding: 15px; }
.modal-content { background-color: #0c2b35; padding: 20px; border-radius: 12px; box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5); position: relative; width: 100%; max-width: 760px; /* 模态框宽度可以大一些以容纳田字格 */ /* height: auto; */ /* 移除固定高度，让其自适应 */ max-height: 95vh; overflow-y: auto; /* 内容多时才滚动 */ border: 1px solid rgba(255, 255, 255, 0.1); }
.modal-close-button { /* ... */ }
.comparison-modal-content h2 { text-align: center; color: #ffd166; margin-top: 0; margin-bottom: 20px; font-size: 1.6em; }

.comparison-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr); /* 严格两列 */
  grid-auto-rows: minmax(min-content, auto); /* 行高由内容决定，但至少是内容高度 */
  gap: 15px;
  width: 100%;
}

.comparison-cell {
  background-color: rgba(255, 255, 255, 0.04);
  padding: 12px;
  border-radius: 8px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  display: flex;
  flex-direction: column; /* 确保内部元素垂直排列 */
  min-height: 200px; /* 给单元格一个最小高度，确保对齐，根据内容调整 */
}
.comparison-cell.empty { display: flex; align-items: center; justify-content: center; color: #555; font-style: italic; background-color: rgba(0,0,0,0.1); }
.human-player-cell { border-color: #ffd166; }
.comparison-cell h4 { color: #e0e0e0; margin-top: 0; margin-bottom: 10px; font-size: 1em; border-bottom: 1px solid rgba(255,255,255,0.08); padding-bottom: 6px; display: flex; justify-content: space-between; flex-wrap: wrap;}
.human-player-cell h4 { color: #ffd166; }
.score-summary { font-size: 0.8em; color: #b0bec5; white-space: nowrap; }
.comparison-hand-row { margin-bottom: 8px; }
.comparison-hand-row strong { color: #89cff0; /* 牌道名称用更亮的蓝色 */ font-size: 0.8em; display: block; margin-bottom: 4px; }
.hand-eval-name { color: #f1f1f1; font-weight: normal; } /* 牌型名称 */

.mini-cards {
  display: flex;
  gap: 3px; /* 小卡牌间距 */
  flex-wrap: nowrap; /* 确保5张牌在一行 */
  justify-content: center; /* 居中 */
  align-items: center;
  min-height: 45px; /* 至少有小卡牌的高度 */
  margin-bottom: 5px; /* 与下一行牌道信息的间距 */
}

.comparison-cell .static-card { /* 模态框中的静态卡牌 */
  width: 32px;  /* 进一步缩小以确保5张能在一行显示，且整体不超宽 */
  height: 45px; /* 保持比例 */
  box-shadow: none; /* 移除阴影，更简洁 */
  border: 1px solid rgba(255,255,255,0.1); /* 加个细边框 */
  border-radius: 2px;
}
.comparison-cell .static-card img { object-fit: fill; /* 尝试fill确保填满，如果SVG比例好 */ }
.comparison-cell .static-card-placeholder { width: 32px; height: 45px; font-size: 10px; }
.comparison-cell .image-error-text { font-size: 8px; }

.shoot-info { /* ... (保持不变) ... */ }
.modal-actions { text-align: center; margin-top: 20px; }
.modal-actions .game-button { /* ... (可以沿用 .game-button 样式) ... */ }


/* --- 响应式调整 --- */
@media (max-width: 768px) {
  .top-banner-container { flex-direction: row; flex-wrap: wrap; /* 尝试保持一行，允许换行 */ justify-content: center; /* 换行后居中 */ gap: 6px; padding: 8px; max-width: 100%;}
  .player-banner-item { flex-basis: calc(50% - 4px); /* 一行显示两个 */ min-width: 150px; max-width: none; } /* 允许它们填充空间 */
  .game-board { max-width: 100%; padding: 12px; gap: 15px; }
  .card { width: 65px; height: 91px; }
  .comparison-grid { grid-template-columns: 1fr; } /* 比牌模态框单列 */
  .comparison-cell .static-card { width: 30px; height: 42px; }
}
@media (max-width: 480px) {
  .top-banner-container { flex-direction: column; align-items: center; } /* 非常小屏幕上垂直排列 */
  .player-banner-item { width: 90%; max-width: 300px; }
  .card { width: 50px; height: 70px; }
  .hand-area.allow-wrapping { min-height: 120px; } /* (70+7+70)+padding */
  .comparison-cell .static-card { width: 26px; height: 36px; }
}
