/* frontend/src/assets/main.css */
html, body {
  height: 100%;
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
  background-color: #005020; /* 调整为一个稍微柔和的深绿色 */
  color: #e8f5e9; /* 默认文字用非常浅的绿色或白色 */
  overflow: hidden; /* 防止整个页面出现滚动条 */
  -webkit-tap-highlight-color: transparent;
}

#app, .app-flex-container {
  min-height: 100vh; /* 确保占满视口 */
  height: 100%; /* 强制高度 */
  display: flex;
  flex-direction: column;
  padding: 5px; /* 整体边距 */
  box-sizing: border-box;
  overflow: hidden; /* 应用级别也防止溢出 */
}

/* --- 卡片样式 --- */
.card {
  /* 尺寸调整 - 使用视口单位配合最大最小值，或固定值 */
  width: calc(100% / 7 - 6px); /* 尝试让一行能放下约7张牌，减去gap */
  max-width: 80px;  /* 桌面端最大宽度 */
  min-width: 55px;  /* 手机端最小宽度 */
  aspect-ratio: 2.5 / 3.5; /* 保持扑克牌的宽高比 */
  height: auto; /* 高度由宽度和宽高比决定 */
  
  /* --- 再次强制移除边框 --- */
  border: 0 none !important; 
  outline: 0 none !important;
  box-sizing: border-box; /* 确保 padding 和 border 不增加元素总尺寸 */
  /* --- 强制移除边框结束 --- */

  border-radius: 6px; /* 圆角 */
  background-color: #ffffff; /* 卡片背景纯白 */
  color: #212121; /* 卡片上文字用深色 */
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: grab;
  user-select: none;
  box-shadow: 0px 1px 3px rgba(0,0,0,0.3), 0px 0px 1px rgba(0,0,0,0.1); /* 精细调整阴影 */
  transition: transform 0.15s ease-out, box-shadow 0.15s ease-out;
  /* margin: 1px; /* 移除，使用父容器的 gap */
}
.card img {
  display: block; /* 消除图片下方可能的空白 */
  width: 90%;
  height: 90%;
  object-fit: contain;
  pointer-events: none;
  border-radius: 3px; /* 图片自身的圆角，以防SVG边缘问题 */
}
/* 拖拽时的视觉效果 */
.card.dragging { /* 这个 class 是JS动态添加给克隆体的 */
  opacity: 0.85 !important;
  transform: scale(1.15) rotate(5deg) !important;
  box-shadow: 0 8px 16px rgba(0,0,0,0.3) !important;
  z-index: 2000 !important; /* 确保在最上层 */
  /* position: fixed !important;  由JS控制 */
}

/* --- 卡片容器 --- */
.card-container {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  min-height: calc(85px + 16px); /* 基于最小卡片高度 + padding 估算 */
  border: 1px dashed rgba(255, 255, 255, 0.25); /* 容器虚线边框，更柔和 */
  padding: 8px;
  border-radius: 6px;
  position: relative;
  align-items: flex-start;
  justify-content: flex-start;
  background-color: rgba(0, 0, 0, 0.08); /* 容器背景，深色背景下的深一点的透明 */
  margin-bottom: 8px;
}
.card-container.is-empty {
  background-color: rgba(0, 0, 0, 0.12);
  display: flex;
  align-items: center;
  justify-content: center;
}
.drag-over {
  border-color: #a5d6a7;
  border-style: solid;
  background-color: rgba(129, 199, 132, 0.4);
}
.drop-placeholder {
  color: #a7ffeb; /* 占位符文字颜色 */
  font-style: italic;
  text-align: center;
  width: 100%;
  font-size: 0.9em;
  padding: 10px 0;
}

/* --- 通用按钮等 --- */
button {
  background-color: #1b5e20; /* 更深的绿色按钮 */
  color: #e8f5e9; /* 浅色文字 */
  padding: 9px 14px;
  margin: 5px;
  border: 1px solid #003300; /* 按钮边框 */
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.95em;
  box-shadow: 0 1px 2px rgba(0,0,0,0.2);
  transition: background-color 0.2s, box-shadow 0.2s;
}
button:hover {
  background-color: #2e7d32;
  box-shadow: 0 2px 4px rgba(0,0,0,0.25);
}
button:disabled {
  background-color: rgba(0,0,0,0.2); /* 半透明深灰色禁用按钮 */
  color: rgba(255,255,255,0.5);
  border-color: rgba(0,0,0,0.1);
  cursor: not-allowed;
  box-shadow: none;
}
input[type="text"] {
  padding: 8px;
  margin: 5px;
  border-radius: 4px;
  border: 1px solid rgba(255,255,255,0.3);
  background-color: rgba(0,0,0,0.1);
  color: #e8f5e9;
}
input[type="text"]::placeholder {
  color: rgba(255,255,255,0.5);
}


/* --- App.vue 布局 --- */
.global-error { margin-bottom: 10px; flex-shrink: 0; }
.game-area {
  background-color: transparent;
  border-radius: 6px;
  display: flex;
  flex-direction: column;
  overflow: hidden; /* 重要 */
  flex-grow: 1;
}
.app-flex-grow { /* 应用于 game-area 的子元素，如果它们需要填充空间 */
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  min-height: 0; /* 允许 flex item 收缩 */
}
.top-info-bar {
  background-color: rgba(0, 0, 0, 0.3); /* 信息栏背景 */
  color: #c8e6c9; /* 信息栏文字 */
  padding: 7px 10px;
  border-radius: 4px;
  margin-bottom: 8px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 0.8em; /* 进一步缩小 */
  flex-shrink: 0;
  flex-wrap: wrap;
  gap: 6px;
}
.player-status-item strong { color: #fff; }
.restart-button-inline {
  background-color: #004d40 !important;
  border: 1px solid #00796b;
  color: #b2dfdb !important;
  padding: 5px 8px !important;
  font-size: 0.85em !important;
}
.restart-button-inline:hover { background-color: #00695c !important; }

/* GameBoard.vue 的主要容器 */
.game-board-main-area {
  margin-top: 0;
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}
.idle-message, .dealing-message, .message-area {
    text-align: center;
    padding: 20px;
    font-size: 1.05em;
    color: #80cbc4; /* 提示文字颜色 */
    flex-grow: 1;
    display: flex;
    align-items: center;
    justify-content: center;
}
.error {
    background-color: #e57373; /* 错误提示背景 */
    color: #212121; /* 错误提示文字 */
    padding: 10px;
    border-radius: 4px;
    margin-bottom: 10px;
    border: 1px solid #ef5350;
}

/* GameBoard.vue 内部组件的样式 */
.game-board-container {
  padding: 5px 2px;
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  overflow: hidden;
}
.player-area {
  margin-bottom: 8px; /* 和提交按钮的间距 */
  display: flex;
  flex-direction: column;
  flex-grow: 1; /* 关键：让理牌区域占据大部分可用空间 */
  overflow-y: auto; /* 如果墩牌内容过多，允许其内部滚动 */
  padding: 5px 2px; /* 内部padding */
  -webkit-overflow-scrolling: touch;
  gap: 6px;
}
.dun-area, .initial-hand-area {
  margin-bottom: 0; /* 由 player-area 的 gap 控制 */
}
.initial-hand-area .card-container {
    flex-grow: 1; /* 让这个手牌区能尽可能地扩展 */
    min-height: 110px; /* 至少能放两行小卡片 */
    align-content: flex-start;
}

.segments { display: flex; flex-direction: column; gap: 6px; }
.segments.showdown-view .card-container { /* 修正选择器 */
    background-color: rgba(121, 134, 203, 0.15);
    border-style: solid;
    border-color: rgba(255,255,255,0.2);
}
.submit-hand-button {
  margin: 10px auto; /* 上下间距，并水平居中 */
  padding: 9px 16px;
  font-size: 0.95em;
  width: auto; /* 根据内容自动宽度 */
  min-width: 150px; /* 最小宽度 */
  max-width: 90%; /* 最大宽度不超过父容器90% */
  flex-shrink: 0;
}
.status-text {
    text-align: center;
    margin-top: 5px;
    color: #b2dfdb; /* 浅青色文字 */
    font-style: italic;
    font-size: 0.85em;
    flex-shrink: 0;
}
.showdown-area {
    background-color: rgba(0,0,0,0.2);
    color: #e0f2f1;
    padding: 10px;
    border-radius: 4px;
    overflow-y: auto;
    max-height: 28vh; /* 调整最大高度 */
    flex-shrink: 0;
    margin-top: auto;
}
.showdown-area h3, .showdown-area h4 { color: #fff; margin-top: 0; margin-bottom: 6px; font-size: 1.1em; }
.comparison-summary p { font-size: 0.9em; margin: 3px 0; }
.comparison-summary h4 { color: #fff176; margin-top: 6px; font-size: 1em; }
.ai-hand-showdown h4 { color: #81d4fa; }
.ai-hand-showdown .card-container { background-color: rgba(0,0,0,0.1); }

/* 媒体查询，针对手机等小屏幕 */
@media (max-width: 600px) {
  #app, .app-flex-container { padding: 3px; }
  .card {
    width: calc(100% / 7 - 4px); /* 一行大约7张牌 */
    min-width: 48px; /* 进一步缩小 */
    max-width: 60px;
    border-radius: 3px;
    box-shadow: 1px 1px 2px rgba(0,0,0,0.2);
  }
  .card-container {
    min-height: calc(70px + 10px); /* 适应小卡片 */
    gap: 3px;
    padding: 5px;
    margin-bottom: 4px;
  }
  .initial-hand-area .card-container { min-height: 75px; }
  .top-info-bar { font-size: 0.7em; padding: 4px 6px; margin-bottom: 5px; gap: 4px; }
  .player-statuses-inline { gap: 6px; }
  .restart-button-inline { padding: 3px 6px !important; font-size: 0.75em !important; }
  .submit-hand-button { font-size: 0.85em; padding: 7px 10px; }
  .drop-placeholder { font-size: 0.75em; padding: 6px 0; }
  .showdown-area { padding: 6px; max-height: 30vh; }
  .showdown-area h3, .showdown-area h4 { font-size: 0.95em; }
  .game-board-container { padding: 3px 1px; }
  .player-area { padding: 3px 1px; gap: 4px; }
  .segments { gap: 4px; }
}
