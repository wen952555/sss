/* frontend/src/components/HandDisplay.css */
.hand-display-container {
    padding: 0; 
    border-radius: 4px; 
    display: flex; 
    flex-direction: column; 
    min-width: 0; 
    position: relative; 
    width: 100%; 
    box-sizing: border-box;
    /* background-color: rgba(0, 255, 0, 0.02); */ /* 调试用 */
}

.dun-title-background-text {
    position: absolute; 
    top: 0; 
    left: 0; 
    right: 0;
    bottom: 0; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    font-size: 1.8em; 
    color: rgba(80, 85, 95, 0.15); /* 非常淡 */
    font-weight: 500; 
    z-index: 1; /* 在卡牌之下 */
    pointer-events: none !important; /* ★★★ 强制不捕获事件 ★★★ */
    white-space: normal; 
    text-align: center; 
    padding: 10px; 
    overflow: hidden; 
    text-overflow: ellipsis;
    line-height: 1.2; 
}
.hand-display-手牌 .dun-title-background-text,
.hand-display-手牌区-请先摆满头尾墩 .dun-title-background-text,
.hand-display-中墩候选 .dun-title-background-text {
    font-size: 2em; 
    color: rgba(80, 85, 95, 0.08); /* 更更淡 */
}

.cards-wrapper {
    display: flex;
    flex-wrap: nowrap; 
    justify-content: flex-start; /* ★★★ 强制向左对齐 ★★★ */
    align-items: center; 
    width: 100%; 
    min-height: 184px; /* (卡牌180px + 上下各2px margin) */
    padding: 2px 0; /* ★★★ 移除左右 padding，让卡牌可以贴近虚线框边缘，由卡牌 margin 控制间距 ★★★ */
    position: relative; 
    z-index: 2; 
    box-sizing: border-box;
    /* background-color: rgba(255, 0, 0, 0.02); */ /* 调试用 */
    overflow: visible; /* ★★★ 改为 visible，以防拖拽时卡牌被裁剪 ★★★ */
}
.hand-display-container.is-hand-pool .cards-wrapper {
    flex-wrap: wrap;
    justify-content: flex-start; /* ★★★ 手牌池也强制向左对齐 ★★★ */
    padding: 2px 0; /* 手牌池的 wrapper 也移除左右padding */
    /* min-height: 200px; */ /* 可以根据需要调整 */
}

/* 卡牌重叠效果 - 卡牌宽度 128px, margin 左右各4px (总共8px) */
/* (128 + 8) = 136px 每张牌占据宽度 (不重叠时) */
/* 如果希望露出30px，则需要移动 136 - 30 = 106px */
.hand-display-container:not(.is-hand-pool) .cards-wrapper > div[data-rbd-draggable-id]:not(:first-child) { 
    margin-left: -98px; /* ★★★ 128 (width) + 4 (avg margin) - X (露出) = 132 - X.  X=30 => -102.  X=40 => -92 ★★★ */
                        /* 假设卡牌有效宽度是 128 + 2*3(margin) = 134. 露出 30 => -104 */
                        /* 实际效果取决于 Card.css 的 margin 和这里的 margin-left */
                        /* 我们将卡牌左右 margin 改为 4px，所以不重叠间距是 8px */
                        /* 重叠后露出 30px => margin-left: -(128+4 - 30) = -102px */
                        /* 使用精确的卡牌宽度来计算： -(card_width - exposed_width + card_horizontal_margin) */
                        /* -(128 - 30 + (3+3)) = -104px (如果希望牌之间视觉上露出30px) */
                        /* 简化：直接基于视觉调整，目标是牌之间有合适的重叠 */
}
.hand-display-container.is-hand-pool .cards-wrapper > div[data-rbd-draggable-id] { 
    /* 手牌区卡牌不重叠，它们的间距由 Card.css 的 margin 控制 */
    margin-left: 0px; /* 确保手牌区的第一个牌没有额外的负margin */
}
.hand-display-container.is-hand-pool .cards-wrapper > div[data-rbd-draggable-id]:not(:first-child) { 
    margin-left: 0px; /* 确保手牌区的其他牌也没有负margin，完全依赖 Card.css 的 margin */
}


/* 拖拽高亮和禁用样式 */
.cards-wrapper.dragging-over {
    background-color: rgba(88, 101, 242, 0.05); /* 更淡 */
    outline: 1px dashed #5865f2; 
    outline-offset: 0px; /* 让outline紧贴 */
}
.cards-wrapper.drop-disabled { /* ... */ }
