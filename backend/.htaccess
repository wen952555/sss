# backend/.htaccess
RewriteEngine On

# RewriteBase /backend/ # Usually not needed if paths in RewriteRule are correct

# REMOVE OR COMMENT OUT THESE CORS HEADERS FROM HERE:
# Header set Access-Control-Allow-Origin "https://xxx.9525.ip-ddns.com"
# Header set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
# Header set Access-Control-Allow-Headers "Content-Type, Authorization, X-Requested-With, Cache-Control"
# Header set Access-Control-Allow-Credentials "true"

# Handle OPTIONS requests for preflight (can also be handled by PHP, but here is fine too if PHP doesn't exit early for OPTIONS)
# If PHP handles OPTIONS, you might not need this rule.
# For safety, keeping it won't hurt if PHP handles it correctly by exiting after sending headers.
RewriteCond %{REQUEST_METHOD} OPTIONS
RewriteRule ^(.*)$ $1 [R=200,L] # Or let PHP handle it by removing this rule

# Rewrite all requests that are not actual files or directories under /backend/
# to the api/index.php script.
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ api/index.php?path=$1 [L,QSA]
